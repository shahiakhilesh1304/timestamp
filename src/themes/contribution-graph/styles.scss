/**
 * Contribution Graph theme styles
 * GitHub-style grid with pixel-art digits
 *
 * ARCHITECTURE: This theme uses canvas-based rendering for performance.
 * - All square rendering (colors, animations, hover) is handled by canvas
 * - CSS only handles: container backgrounds, canvas positioning, GPU hints
 * - Colors are defined in utils/colors.ts as hex values for canvas fillStyle
 */

// =============================================================================
// COLOR MODE PALETTES (CSS Variables for Container Backgrounds)
// =============================================================================
// These CSS variables are used for:
// 1. Theme container background (instant theme switching)
// 2. Landing page background container
// Canvas renderer uses equivalent hex values from colors.ts

:root {
  // Dark mode palette
  --contribution-graph-background-for-dark: #0d1117;
  // Light mode palette
  --contribution-graph-background-for-light: #ffffff;
}

// =============================================================================
// COLOR MODE SWITCHING (Background Only)
// =============================================================================

@media (prefers-color-scheme: dark) {
  :root {
    --contribution-graph-background: var(--contribution-graph-background-for-dark);
  }
}

@media (prefers-color-scheme: light) {
  :root {
    --contribution-graph-background: var(--contribution-graph-background-for-light);
  }
}

[data-color-mode='dark'] {
  --contribution-graph-background: var(--contribution-graph-background-for-dark);
}

[data-color-mode='light'] {
  --contribution-graph-background: var(--contribution-graph-background-for-light);
}

// =============================================================================
// THEME CONTAINER
// =============================================================================

// Theme container - background applied to orchestrator-provided container
// Base positioning (fixed, inset, flex, centering) comes from [data-theme] in app-shell.css
[data-theme="contribution-graph"] {
  background: var(--contribution-graph-background);
  // IMPORTANT: Hide overflow so grid squares extending past viewport edge are clipped
  // This creates the illusion of an infinite grid without causing scrollbars
  overflow: hidden;
}

// =============================================================================
// CANVAS RENDERER
// =============================================================================
// Single canvas element replaces 5000+ DOM nodes
// PERF: One GPU layer instead of thousands of compositor layers

.contribution-graph-canvas {
  display: block;
  // PERF: hint browser to keep this layer on GPU
  will-change: contents;
  // PERF: contain within bounds - layout changes don't affect parent
  contain: strict;
}

// =============================================================================
// LANDING PAGE BACKGROUND
// =============================================================================
// Landing page uses same canvas renderer for visual consistency
// IMPORTANT: Use position: fixed so background is positioned relative to viewport,
// not the scrollable landing-page container. Prevents nested scrolling issues.

.landing-theme-background--contribution-graph {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: visible;
  background: var(--contribution-graph-background);

  .contribution-graph-canvas {
    position: absolute;
    top: 0;
    left: 0;
  }
}
